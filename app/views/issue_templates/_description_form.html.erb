<%= f.fields_for :descriptions do |description_form| %>
  <%= render partial: "issue_templates/sections/#{description_form.object.class.short_name}_form",
             locals: {form: description_form, template: false} %>
<% end %>

<%# Empty templates %>
<% IssueTemplateDescription.subclasses.each do |klass| %>
  <%= f.fields_for :descriptions_attributes, index: "$id_section$" do |description_form| %>
    <%= render partial: "issue_templates/sections/#{klass.short_name}_form",
               locals: {form: description_form, template: true} %>
  <% end %>
<% end %>

<script>
    $(function() {
        if ((typeof $().select2) === 'function') {
            $('.split_description.select select').select2({
                tags: true,
                tokenSeparators: [','],
                containerCss: {
                    width: '400px',
                    minwidth: '400px'
                },
                width: '400px'
            });
        }
    });
</script>
